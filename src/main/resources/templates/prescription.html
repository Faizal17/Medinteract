<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title> Medinteract </title>

    <link rel="stylesheet" type="text/css" href="static/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
            crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <script src="https://code.jquery.com/jquery-3.6.3.min.js"
            integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
    <script src="https://cdn.datatables.net/1.13.2/js/jquery.dataTables.min.js"></script>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.2/css/jquery.dataTables.min.css">
    <script type="text/javascript" src="static/script.js"></script>
</head>

<body>
<div id="navDiv"></div>
<div id="contentDiv" class="mt-5 py-3" style="background-color: white">
    <table id="patientTable" class="table display" style="width:100%">
        <thead>
        <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Prescribe</th>

        </tr>
        </thead>
    </table>
</div>

</body>

</html>

<script>
    $.ajax({
        url: globalURL + "patient/fetchAll",
        type: "GET",
        dataType: "json"
    })
        .done(function (response) {
            try {
                $('#patientTable').DataTable({
                    data: response.data,
                    columns: [
                        {data: 'patientName'},
                        {data: 'patientEmail'},
                        {
                            data: 'patientEmail',
                            render: function (data) {
                                return "<button id = '" + data + "' class = 'prescibe btn btn-outline-primary'>Prescribe</button>";
                            }
                        },
                    ]
                });
                addToast(false, "Success", "Success!")
            } catch (err) {
                addToast(true, "Error", "Some unknown error occurred. Pls try again later!")
            }
        })
        .fail(function (jqXHR, textStatus, errorThrown) {
            addToast(true, "Error", "Some unknown error occurred. Pls try again later!")
        });
</script>